{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Invincible-master\\\\Invincible-master\\\\clientSide\\\\src\\\\components\\\\ProductPage\\\\ProductPage.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport './ProductPage.css';\nimport WebcamCapture from '../WebcamCapture/WebcamCapture';\nimport HomeCategorySlider from '../HomeCategorySlider/HomeCategorySlider';\nimport WebcamOrFile from '../WebcamOrFile/WebcamOrFile';\nimport Carousel from 'react-elastic-carousel';\nimport Loader from '../Loader/Loader';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { history } from '../../helpers/history';\nimport { tryItOn } from '../../redux/actions/authAction';\n\nfunction ProductPage() {\n  let [recommendedSize, setRecommendedSize] = useState('');\n  let [size, setSize] = useState('');\n  let [skinTone, setSkinTone] = useState('');\n  let {\n    category_id,\n    product_id\n  } = useParams();\n  let [product, setProduct] = useState(null);\n  let [category, setCategory] = useState(null);\n  let [capture, setCapture] = useState(false);\n  let [webcamIsOn, setWebcamIsOn] = useState(false);\n  let [trialRoomImage, setTrialRoomImage] = useState('');\n  let [displayLoader, setDisplayLoader] = useState(false); // let dispatch = useDispatch()\n\n  let user = useSelector(state => state.auth.user);\n  let productImageContainerRef = useRef(null);\n  axios.get(`http://127.0.0.1:5000/skinTone`, config).then(res => {\n    // console.log(res.data)\n    setSkinTone(res.data.skin - tone);\n  }).catch(err => {\n    console.log(err);\n  });\n  console.log(skinTone); //event handler for when the user clicks on the try it on button\n\n  const handleTryItOnClick = async e => {\n    e.preventDefault(); // setCapture(!capture)\n\n    if (user) {\n      setDisplayLoader(true);\n      setTimeout(() => {\n        setTrialRoomImage(`https://127.0.0.1:5000/uploads/1_1605561616_product_10.jpg`);\n        window.scrollTo(0, 0);\n        setDisplayLoader(false); // console.log(res.data)\n\n        setDisplayLoader(false);\n      }, 8000); // const token = localStorage.getItem('token')\n      // const config ={\n      //     headers:{\n      //         \"Content-type\" :  \"application/json\"\n      //     }\n      // }\n      // if(token){\n      //     config.headers['x-auth-token'] = token;\n      // }\n      // console.log(`https://192.168.1.34:5000/tryiton/product/${product_id}`)\n      // axios.get(`https://192.168.1.34:5000/tryiton/product/${product_id}`,config)\n      // .then(res=>{\n      //     setTrialRoomImage(`https://192.168.1.34:5000/${res.data.trial_image}`)\n      //     window.scrollTo(0,0)\n      //     setDisplayLoader(false)\n      //     console.log(res.data)\n      //     setDisplayLoader(false)\n      // })\n      // .catch(err=>{\n      //     console.log(err)\n      // })\n    } else {\n      history.push('/auth');\n    }\n  }; //event handler for selecting size\n\n\n  const handleSizeSelect = (event, element) => {\n    let btns = document.getElementsByClassName('size-btn');\n    let btn_array = Array.from(btns);\n    btn_array.forEach(btn => {\n      btn.classList.remove('size-btn-active');\n    }); // let element = document.querySelector()\n\n    event.target.classList.add('size-btn-active');\n    setSize(event.target.innerHTML);\n  }; //event handler for switiching on the webcam\n\n\n  const handleSwitichingOnWebCam = event => {\n    event.preventDefault();\n    setWebcamIsOn(true);\n    setCapture(false);\n  }; //closing the trial room pop-up\n\n\n  const handleCaptureClose = event => {\n    event.preventDefault();\n    handleCleanUp();\n  }; //helper fuction for closing the trial room pop-up\n\n\n  const handleCleanUp = () => {\n    setCapture(false);\n    setWebcamIsOn(false);\n  }; //use-effect hook used as component should update\n\n\n  useEffect(async () => {\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    };\n    let token = localStorage.getItem('token');\n\n    if (token) {\n      config.headers['x-auth-token'] = token;\n    } // axios.get(`http://127.0.0.1:5000/category/${category_id}/product/${product_id}`,config)\n    //     .then(res => {\n    //         setProduct(res.data.product)\n    //         setCategory(res.data.category)\n    //         setTrialRoomImage('')\n    //     })\n    //     .catch(err=>{\n    //         console.log()\n    //     })\n\n\n    let categoryData = await axios.get(`http://127.0.0.1:5000/category/${category_id}/product/${product_id}`, config);\n    let recomSize = await axios.get(`http://127.0.0.1:5000/testing`, config);\n    setProduct(categoryData.data.product);\n    setCategory(categoryData.data.category);\n    setTrialRoomImage('');\n    setRecommendedSize(recomSize.data.recommendedSize); // console.log(categoryData);\n\n    let btns = document.getElementsByClassName('size-btn');\n    let btn_array = Array.from(btns);\n    btn_array.forEach(btn => {\n      btn.addEventListener('click', handleSizeSelect);\n    });\n  }, [product_id, category_id]);\n  return product && category && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-outer-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: productImageContainerRef,\n    className: \"product-image-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, trialRoomImage ? /*#__PURE__*/React.createElement(Carousel, {\n    itemsToScroll: 1,\n    itemsToShow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"product-image\",\n    src: trialRoomImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"product-image\",\n    src: `http://127.0.0.1:5000/upload/${product.image}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 26\n    }\n  })) : /*#__PURE__*/React.createElement(\"img\", {\n    className: \"product-image\",\n    src: `http://127.0.0.1:5000/upload/${product.image}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"product-brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, product.brand), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"product-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, [product.description])), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product-discountedPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, `Rs.${product.regular_price * (1 - product.discount / 100)}`), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product-regularPrice strike\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, \" \", `Rs.${product.regular_price}`)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product-discountPercentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, \" (\", `${product.discount}% OFF`, \")\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"product-price-spl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 25\n    }\n  }, \"Inclusive of taxes\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: '0 0 2rem 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: trialRoomImage ? {} : {\n      margin: '0 0 1rem 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, \"Select Size\"), /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      color: 'orange',\n      marginBottom: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 26\n    }\n  }, \"Recommended size - \", recommendedSize), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"size-btn-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSizeSelect,\n    className: \"size-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }\n  }, \"S\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSizeSelect,\n    className: \"size-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 29\n    }\n  }, \"M\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSizeSelect,\n    className: \"size-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 29\n    }\n  }, \"L\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSizeSelect,\n    className: \"size-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, \"XL\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: '0 0 2rem 0'\n    },\n    className: \"product-btn-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"product-btn cart-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"btn-icon fas fa-shopping-bag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 66\n    }\n  }), \" Add To Bag\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleTryItOnClick,\n    className: \"product-btn trial-room-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"btn-icon fas fa-male\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 101\n    }\n  }), \" Try It On\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"best-offers-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      margin: '0 0 1rem 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, \"Best Offers\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"100% Original Products\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }\n  }, \"Free Delivery on order above Rs. 799\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }, \"Pay on delivery might be available\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, \"Easy 30 days returns and exchanges\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, \"Try and Buy might be available\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: '#f7f7f7'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"category-info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: 'solid 5px transparent',\n      marginBottom: '2rem'\n    },\n    className: \"category-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      background: '#f7f7f7',\n      paddingBottom: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 25\n    }\n  }, \"Similiar Products\"))), /*#__PURE__*/React.createElement(HomeCategorySlider, {\n    category: category,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  })), displayLoader && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlay-trial-room\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 31\n    }\n  }), displayLoader && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 34\n    }\n  }));\n}\n\nexport default ProductPage;","map":{"version":3,"sources":["C:/Users/Lenovo/Downloads/Invincible-master/Invincible-master/clientSide/src/components/ProductPage/ProductPage.js"],"names":["React","useEffect","useState","useRef","useParams","axios","WebcamCapture","HomeCategorySlider","WebcamOrFile","Carousel","Loader","useSelector","useDispatch","history","tryItOn","ProductPage","recommendedSize","setRecommendedSize","size","setSize","skinTone","setSkinTone","category_id","product_id","product","setProduct","category","setCategory","capture","setCapture","webcamIsOn","setWebcamIsOn","trialRoomImage","setTrialRoomImage","displayLoader","setDisplayLoader","user","state","auth","productImageContainerRef","get","config","then","res","data","skin","tone","catch","err","console","log","handleTryItOnClick","e","preventDefault","setTimeout","window","scrollTo","push","handleSizeSelect","event","element","btns","document","getElementsByClassName","btn_array","Array","from","forEach","btn","classList","remove","target","add","innerHTML","handleSwitichingOnWebCam","handleCaptureClose","handleCleanUp","headers","token","localStorage","getItem","categoryData","recomSize","addEventListener","image","brand","description","regular_price","discount","margin","color","marginBottom","background","border","paddingBottom"],"mappings":"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","sourcesContent":["import React,{useEffect,useState,useRef} from 'react'\nimport {useParams} from 'react-router-dom'\nimport axios from 'axios'\nimport './ProductPage.css'\nimport WebcamCapture from '../WebcamCapture/WebcamCapture';\nimport HomeCategorySlider from '../HomeCategorySlider/HomeCategorySlider'\nimport WebcamOrFile from '../WebcamOrFile/WebcamOrFile'\nimport Carousel from 'react-elastic-carousel'\nimport Loader from '../Loader/Loader'\nimport {useSelector,useDispatch} from 'react-redux'\nimport {history} from '../../helpers/history'\nimport {tryItOn} from '../../redux/actions/authAction'\nfunction ProductPage() {\n\n    let [recommendedSize,setRecommendedSize] = useState('')\n    let [size,setSize] = useState('')\n    let [skinTone, setSkinTone] = useState('')\n    let {category_id,product_id} = useParams()\n    let [product,setProduct] = useState(null)\n    let [category,setCategory] = useState(null)\n    let [capture,setCapture] = useState(false)\n    let [webcamIsOn,setWebcamIsOn] = useState(false)\n    let [trialRoomImage,setTrialRoomImage] = useState('')\n    let [displayLoader,setDisplayLoader] = useState(false)\n    // let dispatch = useDispatch()\n    let user = useSelector(state => state.auth.user)\n    let productImageContainerRef = useRef(null)\n\n    axios.get(`http://127.0.0.1:5000/skinTone`,config)\n        .then(res =>{\n            // console.log(res.data)\n            setSkinTone(res.data.skin-tone)\n        })\n        .catch(err =>{\n            console.log(err)\n        })\n\n    console.log(skinTone);\n\n    //event handler for when the user clicks on the try it on button\n    const handleTryItOnClick = async (e)=>{\n        e.preventDefault();\n        // setCapture(!capture)\n\n        if(user){\n            setDisplayLoader(true)\n            setTimeout(()=>{\n                    setTrialRoomImage(`https://127.0.0.1:5000/uploads/1_1605561616_product_10.jpg`)\n                    window.scrollTo(0,0)\n                    setDisplayLoader(false)\n                    // console.log(res.data)\n                    setDisplayLoader(false)\n            },8000)\n            // const token = localStorage.getItem('token')\n            // const config ={\n            //     headers:{\n            //         \"Content-type\" :  \"application/json\"\n            //     }\n            // }\n            // if(token){\n            //     config.headers['x-auth-token'] = token;\n            // }\n            // console.log(`https://192.168.1.34:5000/tryiton/product/${product_id}`)\n\n\n            // axios.get(`https://192.168.1.34:5000/tryiton/product/${product_id}`,config)\n            // .then(res=>{\n            //     setTrialRoomImage(`https://192.168.1.34:5000/${res.data.trial_image}`)\n            //     window.scrollTo(0,0)\n            //     setDisplayLoader(false)\n            //     console.log(res.data)\n            //     setDisplayLoader(false)\n            // })\n            // .catch(err=>{\n            //     console.log(err)\n            // })\n\n        }\n        else{\n            history.push('/auth')\n        }\n    }\n\n    //event handler for selecting size\n    const handleSizeSelect = (event,element)=>{\n        let btns= document.getElementsByClassName('size-btn')\n        let btn_array = Array.from(btns)\n        btn_array.forEach((btn)=>{\n            btn.classList.remove('size-btn-active')\n        })\n        // let element = document.querySelector()\n        event.target.classList.add('size-btn-active')\n        setSize(event.target.innerHTML)\n    }\n\n    //event handler for switiching on the webcam\n    const handleSwitichingOnWebCam =(event)=>{\n        event.preventDefault();\n        setWebcamIsOn(true)\n        setCapture(false)\n    }\n\n    //closing the trial room pop-up\n    const handleCaptureClose = (event)=>{\n        event.preventDefault();\n        handleCleanUp()\n\n    }\n\n    //helper fuction for closing the trial room pop-up\n    const handleCleanUp = ()=>{\n        setCapture(false)\n        setWebcamIsOn(false)\n    }\n\n    //use-effect hook used as component should update\n    useEffect( async ()=>{\n\n        const config ={\n            headers:{\n                \"Content-type\" :  \"application/json\"\n            }\n        }\n\n        let token = localStorage.getItem('token');\n        if(token){\n            config.headers['x-auth-token'] = token;\n        }\n\n        // axios.get(`http://127.0.0.1:5000/category/${category_id}/product/${product_id}`,config)\n        //     .then(res => {\n        //         setProduct(res.data.product)\n        //         setCategory(res.data.category)\n        //         setTrialRoomImage('')\n        //     })\n        //     .catch(err=>{\n        //         console.log()\n        //     })\n\n        let categoryData = await axios.get(`http://127.0.0.1:5000/category/${category_id}/product/${product_id}`,config);\n        let recomSize = await axios.get(`http://127.0.0.1:5000/testing`,config);\n\n        setProduct(categoryData.data.product)\n        setCategory(categoryData.data.category)\n        setTrialRoomImage('')\n        setRecommendedSize(recomSize.data.recommendedSize);\n        // console.log(categoryData);\n\n        let btns= document.getElementsByClassName('size-btn')\n\n        let btn_array = Array.from(btns)\n        btn_array.forEach((btn)=>{\n            btn.addEventListener('click',handleSizeSelect)\n        })\n    },[product_id,category_id])\n\n\n\n\n    return product&&category&&(\n        <>\n            <div className='product-outer-container' >\n                <div className='product-container'>\n                <div ref={productImageContainerRef} className='product-image-container'>\n                    {trialRoomImage?\n                     (<Carousel itemsToScroll={1} itemsToShow={1}>\n                         <img className='product-image' src={trialRoomImage}/>\n                         <img className='product-image' src={`http://127.0.0.1:5000/upload/${product.image}`}/>\n                     </Carousel>):\n                     <img className='product-image' src={`http://127.0.0.1:5000/upload/${product.image}`}/>\n                    }\n                </div>\n                <div className='product-info-container'>\n                    <div >\n\n                        <h2 className='product-brand'>{product.brand}</h2>\n                        <h3 className='product-description'>{[product.description]}</h3>\n                    </div>\n                    <div className='product-price'>\n                        <span>\n                            <span className='product-discountedPrice'>{`Rs.${(product.regular_price*(1-(product.discount/100)))}`}</span>\n                            <span className='product-regularPrice strike'> {`Rs.${product.regular_price}`}</span>\n                        </span>\n                        <span className='product-discountPercentage'> ({`${product.discount}% OFF`})</span>\n                        <p className='product-price-spl'>Inclusive of taxes</p>\n                    </div>\n                    <div style={{margin:'0 0 2rem 0'}}>\n                        <h3 style={trialRoomImage?{}:{margin:'0 0 1rem 0'}}>Select Size</h3>\n                        {<h4 style={{color:'orange',marginBottom:'1rem'}}>Recommended size - {recommendedSize}</h4>}\n                        <div className='size-btn-container'>\n                            <button onClick={handleSizeSelect} className='size-btn'>S</button>\n                            <button onClick={handleSizeSelect} className='size-btn'>M</button>\n                            <button onClick={handleSizeSelect} className='size-btn'>L</button>\n                            <button onClick={handleSizeSelect} className='size-btn'>XL</button>\n                        </div>\n                    </div>\n                    <div style={{margin:'0 0 2rem 0'}} className='product-btn-box'>\n                        <button className='product-btn cart-btn'><i className=\"btn-icon fas fa-shopping-bag\"></i> Add To Bag</button>\n                        <button onClick={handleTryItOnClick} className='product-btn trial-room-btn'><i className=\"btn-icon fas fa-male\"></i> Try It On</button>\n                    </div>\n                    <div className='best-offers-container' >\n                        <h3 style={{margin:'0 0 1rem 0'}}>Best Offers</h3>\n                        <p>100% Original Products</p>\n                        <p>Free Delivery on order above Rs. 799</p>\n                        <p>Pay on delivery might be available</p>\n                        <p>Easy 30 days returns and exchanges</p>\n                        <p>Try and Buy might be available</p>\n                    </div>\n                </div>\n                </div>\n            </div>\n            <div style={{background:'#f7f7f7'}}>\n                <div className='category-info-container'>\n                    <div style={{ border: 'solid 5px transparent',marginBottom:'2rem'}} className='category-title'>\n                        <h1 style={{background:'#f7f7f7',paddingBottom:'5px'}}>Similiar Products</h1>\n                    </div>\n                </div>\n                <HomeCategorySlider category={category} />\n            </div>\n\n            {displayLoader && <div className='overlay-trial-room'></div>}\n            {displayLoader &&   (<Loader/>)}\n            {/* {(capture || webcamIsOn) && <div className='overlay-trial-room'></div>} */}\n\n            {/* {capture && <WebcamOrFile handleCaptureClose={handleCaptureClose} handleSwitichingOnWebCam={handleSwitichingOnWebCam} />}\n            {webcamIsOn && <WebcamCapture handleCaptureClose={handleCaptureClose} handleCleanUp={handleCleanUp} setTrialRoomImage={setTrialRoomImage}/>} */}\n        </>\n    )\n}\n\nexport default ProductPage\n"]},"metadata":{},"sourceType":"module"}